<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rush Royal - Tower Defense</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Hauptmen√º -->
    <div id="mainMenu" class="main-menu">
        <div class="menu-background"></div>
        <div class="menu-content">
            <div class="game-logo">
                <h1 class="logo-title">
                    <i class="fas fa-crown"></i>
                    Rush Royal
                </h1>
                <p class="logo-subtitle">Tower Defense Elite</p>
            </div>
            
            <div class="menu-buttons">
                <button id="startGame" class="menu-btn primary">
                    <i class="fas fa-play"></i>
                    <span>Spiel Starten</span>
                </button>
                
                <button id="howToPlay" class="menu-btn secondary">
                    <i class="fas fa-question-circle"></i>
                    <span>Spielanleitung</span>
                </button>
                
                <button id="settings" class="menu-btn secondary">
                    <i class="fas fa-cog"></i>
                    <span>Einstellungen</span>
                </button>
                
                <button id="statistics" class="menu-btn secondary">
                    <i class="fas fa-chart-bar"></i>
                    <span>Statistiken</span>
                </button>
                
                <button id="mapSelection" class="menu-btn secondary">
                    <i class="fas fa-map"></i>
                    <span>Maps</span>
                </button>
            </div>
            
            <div class="menu-footer">
                <p>&copy; 2025 Rush Royal - Tower Defense Elite</p>
                <p>Version 1.0</p>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="game-over-screen" style="display: none;">
        <div class="game-over-background"></div>
        <div class="game-over-content">
            <div class="game-over-header">
                <h1 class="game-over-title">
                    <i class="fas fa-skull-crossbones"></i>
                    Game Over
                </h1>
                <p class="game-over-subtitle">Dein K√∂nigreich ist gefallen!</p>
            </div>
            
            <div class="game-over-stats">
                <div class="stat-item">
                    <div class="stat-icon"><i class="fas fa-wave-square"></i></div>
                    <div class="stat-info">
                        <span class="stat-label">Erreichte Welle</span>
                        <span class="stat-value" id="finalWave">1</span>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-icon"><i class="fas fa-trophy"></i></div>
                    <div class="stat-info">
                        <span class="stat-label">Endpunktzahl</span>
                        <span class="stat-value" id="finalScore">0</span>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-icon"><i class="fas fa-coins"></i></div>
                    <div class="stat-info">
                        <span class="stat-label">Gold verdient</span>
                        <span class="stat-value" id="finalGold">0</span>
                    </div>
                </div>
                
                <div class="stat-item">
                    <div class="stat-icon"><i class="fas fa-crosshairs"></i></div>
                    <div class="stat-info">
                        <span class="stat-label">Feinde besiegt</span>
                        <span class="stat-value" id="finalKills">0</span>
                    </div>
                </div>
            </div>
            
            <div class="game-over-buttons">
                <button id="playAgain" class="menu-btn primary">
                    <i class="fas fa-redo"></i>
                    <span>Nochmal spielen</span>
                </button>
                
                <button id="backToMenu" class="menu-btn secondary">
                    <i class="fas fa-home"></i>
                    <span>Hauptmen√º</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Einstellungen Modal -->
    <div id="settingsModal" class="modal" style="display: none;">
        <div class="modal-background"></div>
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> Einstellungen</h2>
                <button class="modal-close" onclick="closeModal('settingsModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Performance Settings -->
                <div class="settings-section">
                    <h3><i class="fas fa-tachometer-alt"></i> Performance</h3>
                    <div class="setting-item">
                        <label for="fpsLimit">FPS Limit:</label>
                        <select id="fpsLimit">
                            <option value="30">30 FPS</option>
                            <option value="60" selected>60 FPS</option>
                            <option value="120">120 FPS</option>
                            <option value="0">Unbegrenzt</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="particleQuality">Partikel Qualit√§t:</label>
                        <select id="particleQuality">
                            <option value="low">Niedrig</option>
                            <option value="medium" selected>Mittel</option>
                            <option value="high">Hoch</option>
                        </select>
                    </div>
                </div>

                <!-- Audio Settings -->
                <div class="settings-section">
                    <h3><i class="fas fa-volume-up"></i> Audio</h3>
                    <div class="setting-item">
                        <label for="masterVolume">Master Lautst√§rke:</label>
                        <input type="range" id="masterVolume" min="0" max="100" value="100" class="volume-slider">
                        <span class="volume-value">100%</span>
                    </div>
                    <div class="setting-item">
                        <label for="sfxVolume">Effekt Lautst√§rke:</label>
                        <input type="range" id="sfxVolume" min="0" max="100" value="80" class="volume-slider">
                        <span class="volume-value">80%</span>
                    </div>
                    <div class="setting-item">
                        <label for="musicVolume">Musik Lautst√§rke:</label>
                        <input type="range" id="musicVolume" min="0" max="100" value="60" class="volume-slider">
                        <span class="volume-value">60%</span>
                    </div>
                </div>

                <!-- Graphics Settings -->
                <div class="settings-section">
                    <h3><i class="fas fa-palette"></i> Grafik</h3>
                    <div class="setting-item">
                        <label for="shadows">Schatten:</label>
                        <input type="checkbox" id="shadows" checked class="toggle-switch">
                    </div>
                    <div class="setting-item">
                        <label for="animations">Animationen:</label>
                        <input type="checkbox" id="animations" checked class="toggle-switch">
                    </div>
                    <div class="setting-item">
                        <label for="backgroundEffects">Hintergrund Effekte:</label>
                        <input type="checkbox" id="backgroundEffects" checked class="toggle-switch">
                    </div>
                </div>

                <!-- Gameplay Settings -->
                <div class="settings-section">
                    <h3><i class="fas fa-gamepad"></i> Gameplay</h3>
                    <div class="setting-item">
                        <label for="autoSave">Auto-Speichern:</label>
                        <input type="checkbox" id="autoSave" checked class="toggle-switch">
                    </div>
                    <div class="setting-item">
                        <label for="showFPS">FPS Anzeige:</label>
                        <input type="checkbox" id="showFPS" class="toggle-switch">
                    </div>
                    <div class="setting-item">
                        <label for="pauseOnFocusLoss">Pausieren bei Fokusverlust:</label>
                        <input type="checkbox" id="pauseOnFocusLoss" checked class="toggle-switch">
                    </div>
                    <div class="setting-item">
                        <label for="confirmSell">Verkauf best√§tigen:</label>
                        <input type="checkbox" id="confirmSell" checked class="toggle-switch">
                    </div>
                </div>

                <!-- Control Settings -->
                <div class="settings-section">
                    <h3><i class="fas fa-keyboard"></i> Steuerung</h3>
                    <div class="setting-item">
                        <label for="quickBuild">Schnellbau Modus:</label>
                        <input type="checkbox" id="quickBuild" class="toggle-switch">
                    </div>
                    <div class="setting-item">
                        <label for="rightClickSell">Rechtsklick zum Verkaufen:</label>
                        <input type="checkbox" id="rightClickSell" class="toggle-switch">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="menu-btn secondary" onclick="resetSettings()">
                    <i class="fas fa-undo"></i>
                    <span>Zur√ºcksetzen</span>
                </button>
                <button class="menu-btn primary" onclick="saveSettings()">
                    <i class="fas fa-save"></i>
                    <span>Speichern</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Statistiken Modal -->
    <div id="statisticsModal" class="modal" style="display: none;">
        <div class="modal-background"></div>
        <div class="modal-content statistics-modal">
            <div class="modal-header">
                <h2><i class="fas fa-chart-bar"></i> Spielstatistiken</h2>
                <button class="modal-close" onclick="closeModal('statisticsModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Overview Stats -->
                <div class="stats-overview">
                    <div class="stat-highlight-card">
                        <div class="stat-highlight-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-highlight-content">
                            <div class="stat-highlight-value" id="statsHighestWave">1</div>
                            <div class="stat-highlight-label">H√∂chste Welle</div>
                        </div>
                    </div>
                    
                    <div class="stat-highlight-card">
                        <div class="stat-highlight-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <div class="stat-highlight-content">
                            <div class="stat-highlight-value" id="statsTotalGames">0</div>
                            <div class="stat-highlight-label">Spiele gespielt</div>
                        </div>
                    </div>
                    
                    <div class="stat-highlight-card">
                        <div class="stat-highlight-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-highlight-content">
                            <div class="stat-highlight-value" id="statsTotalPlayTime">0h 0m</div>
                            <div class="stat-highlight-label">Gesamtspielzeit</div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Stats -->
                <div class="stats-section">
                    <h3><i class="fas fa-crosshairs"></i> Kampfstatistiken</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-name">Feinde besiegt</span>
                            <span class="stat-value" id="statsTotalKills">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-name">T√ºrme gebaut</span>
                            <span class="stat-value" id="statsTowersBuilt">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-name">Upgrades durchgef√ºhrt</span>
                            <span class="stat-value" id="statsUpgrades">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-name">F√§higkeiten verwendet</span>
                            <span class="stat-value" id="statsAbilitiesUsed">0</span>
                        </div>
                    </div>
                </div>

                <div class="stats-section">
                    <h3><i class="fas fa-coins"></i> Wirtschaftsstatistiken</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-name">Gold verdient</span>
                            <span class="stat-value" id="statsTotalGold">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-name">Gold ausgegeben</span>
                            <span class="stat-value" id="statsGoldSpent">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-name">T√ºrme verkauft</span>
                            <span class="stat-value" id="statsTowersSold">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-name">H√∂chster Score</span>
                            <span class="stat-value" id="statsHighestScore">0</span>
                        </div>
                    </div>
                </div>

                <div class="stats-section">
                    <h3><i class="fas fa-award"></i> Achievements</h3>
                    <div class="achievements-grid" id="achievementsList">
                        <!-- Achievements werden dynamisch hinzugef√ºgt -->
                    </div>
                </div>

                <div class="stats-section">
                    <h3><i class="fas fa-chart-line"></i> Durchschnittswerte</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-name">√ò Wellen pro Spiel</span>
                            <span class="stat-value" id="statsAvgWaves">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-name">√ò Kills pro Spiel</span>
                            <span class="stat-value" id="statsAvgKills">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-name">√ò Gold pro Spiel</span>
                            <span class="stat-value" id="statsAvgGold">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-name">√ò Spielzeit</span>
                            <span class="stat-value" id="statsAvgPlayTime">0m</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="menu-btn secondary" onclick="resetStatistics()">
                    <i class="fas fa-trash"></i>
                    <span>Statistiken zur√ºcksetzen</span>
                </button>
                <button class="menu-btn primary" onclick="closeModal('statisticsModal')">
                    <i class="fas fa-check"></i>
                    <span>Schlie√üen</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Map Selection Modal -->
    <div id="mapSelectionModal" class="modal" style="display: none;">
        <div class="modal-background"></div>
        <div class="modal-content map-selection-modal">
            <div class="modal-header">
                <h2><i class="fas fa-map"></i> Map Auswahl</h2>
                <button class="modal-close" onclick="closeModal('mapSelectionModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p class="map-selection-description">
                    W√§hle eine Map f√ºr dein n√§chstes Spiel. Jede Map bietet einzigartige strategische Herausforderungen!
                </p>
                
                <div class="maps-grid" id="mapsGrid">
                    <!-- Maps werden dynamisch hinzugef√ºgt -->
                </div>
                
                <div class="current-map-info" id="currentMapInfo">
                    <h3>Aktuell ausgew√§hlt:</h3>
                    <div class="selected-map-details">
                        <div class="selected-map-name" id="selectedMapName">Klassische Route</div>
                        <div class="selected-map-description" id="selectedMapDescription">Der urspr√ºngliche Pfad - perfekt f√ºr Anf√§nger</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="menu-btn secondary" onclick="closeModal('mapSelectionModal')">
                    <i class="fas fa-times"></i>
                    <span>Abbrechen</span>
                </button>
                <button class="menu-btn primary" onclick="confirmMapSelection()">
                    <i class="fas fa-check"></i>
                    <span>Map w√§hlen</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Spielanleitung Modal -->
    <div id="howToPlayModal" class="modal" style="display: none;">
        <div class="modal-background"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-book"></i> Spielanleitung</h2>
                <button class="modal-close" onclick="closeModal('howToPlayModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="instruction-section">
                    <h3><i class="fas fa-bullseye"></i> Spielziel</h3>
                    <p>Verteidige dein K√∂nigreich vor Wellen von Feinden, indem du strategisch T√ºrme platzierst!</p>
                </div>
                
                <div class="instruction-section">
                    <h3><i class="fas fa-chess-rook"></i> T√ºrme bauen</h3>
                    <ul>
                        <li>W√§hle einen Turm-Typ aus der Seitenleiste</li>
                        <li>Klicke auf eine freie Stelle auf dem Spielfeld</li>
                        <li>Achte auf die Kosten - du brauchst genug Gold!</li>
                    </ul>
                </div>
                
                <div class="instruction-section">
                    <h3><i class="fas fa-magic"></i> Spezialf√§higkeiten</h3>
                    <ul>
                        <li><strong>Meteor:</strong> Verursacht Fl√§chenschaden</li>
                        <li><strong>Freeze:</strong> Verlangsamt alle Feinde</li>
                        <li><strong>Gold Rush:</strong> Verdoppelt Gold-Belohnungen</li>
                    </ul>
                </div>
                
                <div class="instruction-section">
                    <h3><i class="fas fa-heart"></i> √úberlebensstrategie</h3>
                    <ul>
                        <li>Verliere nicht alle deine Leben!</li>
                        <li>Upgrade deine T√ºrme f√ºr mehr Schaden</li>
                        <li>Nutze Spezialf√§higkeiten in kritischen Momenten</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="game-container" id="gameContainer" style="display: none;">
        <!-- Header mit modernem Design -->
        <header class="game-header">
            <div class="header-left">
                <h1 class="game-title">
                    <i class="fas fa-crown"></i>
                    Rush Royal
                </h1>
                <div class="game-subtitle">Tower Defense Elite</div>
            </div>
            
            <div class="stats-panel">
                <div class="stat-card lives">
                    <div class="stat-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="lives">20</div>
                        <div class="stat-label">Leben</div>
                    </div>
                </div>
                
                <div class="stat-card money">
                    <div class="stat-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="money">100</div>
                        <div class="stat-label">Gold</div>
                    </div>
                </div>
                
                <div class="stat-card score">
                    <div class="stat-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="score">0</div>
                        <div class="stat-label">Punkte</div>
                    </div>
                </div>
                
                <div class="stat-card wave">
                    <div class="stat-icon">
                        <i class="fas fa-wave-square"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="wave">1</div>
                        <div class="stat-label">Welle</div>
                    </div>
                </div>
                
                <div class="stat-card speed">
                    <div class="stat-icon">
                        <i class="fas fa-tachometer-alt"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value" id="gameSpeed">1x</div>
                        <div class="stat-label">Speed</div>
                    </div>
                </div>
            </div>
            
            <div class="achievements-bar">
                <div id="currentAchievement" class="achievement-notify">
                    <i class="fas fa-medal"></i>
                    <span class="achievement-text"></span>
                </div>
            </div>
            
            <!-- Skill Effects Panel -->
            <div id="skillEffectsPanel" class="skill-effects-panel">
                <div class="skill-effects-title">
                    <i class="fas fa-magic"></i>
                    <span>Aktive Skill-Effekte</span>
                </div>
                <div id="skillEffectsList" class="skill-effects-list">
                    <!-- Dynamic skill effects will be displayed here -->
                </div>
            </div>
        </header>
        
        <!-- Main Game Area -->
        <main class="main-game-area">
            <div class="game-canvas-container">
                <canvas id="gameCanvas" width="800" height="600"></canvas>
                <div class="canvas-overlay">
                    <div class="wave-counter">
                        <div class="wave-progress">
                            <div id="waveProgress" class="progress-bar"></div>
                        </div>
                        <div class="wave-text">Welle <span id="currentWave">1</span></div>
                    </div>
                    
                    <!-- Combo Display -->
                    <div id="comboDisplay" class="combo-display" style="display: none;">
                        <div class="combo-text">COMBO</div>
                        <div class="combo-value">x<span id="comboValue">1</span></div>
                        <div class="combo-kills"><span id="comboKills">0</span> Kills</div>
                    </div>
                    
                    <!-- Boss Warning -->
                    <div id="bossWarning" class="boss-warning" style="display: none;">
                        <div class="warning-icon">‚ö†Ô∏è</div>
                        <div class="warning-text">BOSS WAVE</div>
                        <div class="warning-subtitle">Bereite dich vor!</div>
                    </div>
                    
                    <!-- Power-Up Notifications -->
                    <div id="powerUpNotification" class="power-up-notification" style="display: none;">
                        <div class="power-up-icon">üíé</div>
                        <div class="power-up-text">Power-Up erhalten!</div>
                    </div>
                </div>
            </div>
            
            <!-- Control Panel -->
            <aside class="control-panel">
                <!-- Tower Shop -->
                <section class="panel-section tower-shop expanded">
                    <div class="section-header" onclick="toggleSection('tower-shop')">
                        <h3><i class="fas fa-hammer"></i> Tower Arsenal</h3>
                        <i class="fas fa-chevron-down section-toggle"></i>
                    </div>
                    
                    <div class="section-content">
                        <div class="tower-grid">
                        <div class="tower-card" data-tower="basic" data-cost="20">
                            <div class="tower-preview basic-tower">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <div class="tower-info">
                                <h4>Basic Tower</h4>
                                <div class="tower-stats">
                                    <span><i class="fas fa-sword"></i> 10</span>
                                    <span><i class="fas fa-crosshairs"></i> 80</span>
                                </div>
                                <div class="tower-cost">
                                    <i class="fas fa-coins"></i> 20
                                </div>
                            </div>
                        </div>
                        
                        <div class="tower-card" data-tower="ice" data-cost="40">
                            <div class="tower-preview ice-tower">
                                <i class="fas fa-snowflake"></i>
                            </div>
                            <div class="tower-info">
                                <h4>Ice Tower</h4>
                                <div class="tower-stats">
                                    <span><i class="fas fa-sword"></i> 5</span>
                                    <span><i class="fas fa-hourglass-half"></i> Slow</span>
                                </div>
                                <div class="tower-cost">
                                    <i class="fas fa-coins"></i> 40
                                </div>
                            </div>
                        </div>
                        
                        <div class="tower-card" data-tower="fire" data-cost="60">
                            <div class="tower-preview fire-tower">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="tower-info">
                                <h4>Fire Tower</h4>
                                <div class="tower-stats">
                                    <span><i class="fas fa-sword"></i> 15</span>
                                    <span><i class="fas fa-explosion"></i> Splash</span>
                                </div>
                                <div class="tower-cost">
                                    <i class="fas fa-coins"></i> 60
                                </div>
                            </div>
                        </div>
                        
                        <div class="tower-card" data-tower="lightning" data-cost="100">
                            <div class="tower-preview lightning-tower">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="tower-info">
                                <h4>Lightning</h4>
                                <div class="tower-stats">
                                    <span><i class="fas fa-sword"></i> 25</span>
                                    <span><i class="fas fa-link"></i> Chain</span>
                                </div>
                                <div class="tower-cost">
                                    <i class="fas fa-coins"></i> 100
                                </div>
                            </div>
                        </div>
                        
                        <div class="tower-card" data-tower="poison" data-cost="80">
                            <div class="tower-preview poison-tower">
                                <i class="fas fa-skull-crossbones"></i>
                            </div>
                            <div class="tower-info">
                                <h4>Poison</h4>
                                <div class="tower-stats">
                                    <span><i class="fas fa-sword"></i> 8</span>
                                    <span><i class="fas fa-virus"></i> DoT</span>
                                </div>
                                <div class="tower-cost">
                                    <i class="fas fa-coins"></i> 80
                                </div>
                            </div>
                        </div>
                        
                        <div class="tower-card" data-tower="sniper" data-cost="120">
                            <div class="tower-preview sniper-tower">
                                <i class="fas fa-crosshairs"></i>
                            </div>
                            <div class="tower-info">
                                <h4>Sniper</h4>
                                <div class="tower-stats">
                                    <span><i class="fas fa-sword"></i> 50</span>
                                    <span><i class="fas fa-eye"></i> 150</span>
                                </div>
                                <div class="tower-cost">
                                    <i class="fas fa-coins"></i> 120
                                </div>
                            </div>
                        </div>
                        
                        <div class="tower-card" data-tower="tesla" data-cost="150">
                            <div class="tower-preview tesla-tower">
                                <i class="fas fa-zap"></i>
                            </div>
                            <div class="tower-info">
                                <h4>Tesla</h4>
                                <div class="tower-stats">
                                    <span><i class="fas fa-sword"></i> 30</span>
                                    <span><i class="fas fa-pause"></i> Stun</span>
                                </div>
                                <div class="tower-cost">
                                    <i class="fas fa-coins"></i> 150
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </section>
                
                <!-- Special Abilities -->
                <section class="panel-section abilities-section collapsed">
                    <div class="section-header" onclick="toggleSection('abilities-section')">
                        <h3><i class="fas fa-magic"></i> Spezialf√§higkeiten</h3>
                        <i class="fas fa-chevron-down section-toggle"></i>
                    </div>
                    
                    <div class="section-content">
                        <div class="abilities-grid">
                        <button id="meteorStrike" class="ability-card" data-cost="50">
                            <div class="ability-icon meteor">
                                <i class="fas fa-meteor"></i>
                            </div>
                            <div class="ability-info">
                                <h4>Meteor</h4>
                                <div class="ability-cost">50G</div>
                            </div>
                            <div class="ability-cooldown">
                                <div class="cooldown-ring"></div>
                            </div>
                        </button>
                        
                        <button id="freezeAll" class="ability-card" data-cost="30">
                            <div class="ability-icon freeze">
                                <i class="fas fa-snowflake"></i>
                            </div>
                            <div class="ability-info">
                                <h4>Freeze</h4>
                                <div class="ability-cost">30G</div>
                            </div>
                            <div class="ability-cooldown">
                                <div class="cooldown-ring"></div>
                            </div>
                        </button>
                        
                        <button id="goldRush" class="ability-card" data-cost="100">
                            <div class="ability-icon gold">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div class="ability-info">
                                <h4>Gold Rush</h4>
                                <div class="ability-cost">100G</div>
                            </div>
                            <div class="ability-cooldown">
                                <div class="cooldown-ring"></div>
                            </div>
                        </button>
                        
                        <button id="timeWarp" class="ability-card" data-cost="80">
                            <div class="ability-icon time">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="ability-info">
                                <h4>Time Warp</h4>
                                <div class="ability-cost">80G</div>
                            </div>
                            <div class="ability-cooldown">
                                <div class="cooldown-ring"></div>
                            </div>
                        </button>
                        
                        <button id="shieldBoost" class="ability-card" data-cost="60">
                            <div class="ability-icon shield">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="ability-info">
                                <h4>Shield</h4>
                                <div class="ability-cost">60G</div>
                            </div>
                            <div class="ability-cooldown">
                                <div class="cooldown-ring"></div>
                            </div>
                        </button>
                        
                        <button id="damageBoost" class="ability-card" data-cost="70">
                            <div class="ability-icon boost">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="ability-info">
                                <h4>Damage x2</h4>
                                <div class="ability-cost">70G</div>
                            </div>
                            <div class="ability-cooldown">
                                <div class="cooldown-ring"></div>
                            </div>
                        </button>
                    </div>
                    </div>
                </section>
                
                <!-- Game Controls -->
                <section class="panel-section controls-section expanded">
                    <div class="section-header" onclick="toggleSection('controls-section')">
                        <h3><i class="fas fa-gamepad"></i> Steuerung</h3>
                        <i class="fas fa-chevron-down section-toggle"></i>
                    </div>
                    
                    <div class="section-content">
                        <div class="controls-grid">
                        <button id="startWave" class="control-btn primary">
                            <i class="fas fa-play"></i>
                            <span>N√§chste Welle</span>
                        </button>
                        
                        <button id="autoWave" class="control-btn warning">
                            <i class="fas fa-sync"></i>
                            <span>Auto Wellen</span>
                        </button>
                        
                        <button id="pauseGame" class="control-btn secondary">
                            <i class="fas fa-pause"></i>
                            <span>Pause</span>
                        </button>
                        
                        <button id="speedUp" class="control-btn accent">
                            <i class="fas fa-forward"></i>
                            <span>2x Speed</span>
                        </button>
                        
                        <button id="fusionBtn" class="control-btn special">
                            <i class="fas fa-magic"></i>
                            <span>Tower Fusion</span>
                        </button>
                        
                        <button id="skillTreeBtn" class="control-btn special">
                            <i class="fas fa-tree"></i>
                            <span>Skill Tree</span>
                        </button>
                        
                        <button id="restartGame" class="control-btn danger">
                            <i class="fas fa-redo"></i>
                            <span>Neustart</span>
                        </button>
                    </div>
                </section>
            </aside>
        </main>
        
        <!-- Tower Upgrade Popup -->
        <div id="towerUpgrade" class="upgrade-section">
            <div class="upgrade-popup">
                <button class="upgrade-close" id="upgradeClose">
                    <i class="fas fa-times"></i>
                </button>
                
                <div class="upgrade-content">
                    <div class="section-header">
                        <h3><i class="fas fa-level-up-alt"></i> Tower Upgrade</h3>
                    </div>
                    
                    <div id="upgradeInfo" class="upgrade-info"></div>
                    
                    <div class="upgrade-actions">
                        <button id="upgradeBtn" class="upgrade-btn">
                            <i class="fas fa-arrow-up"></i>
                            <span>Upgrade (50G)</span>
                        </button>
                        
                        <button id="sellBtn" class="sell-btn">
                            <i class="fas fa-trash"></i>
                            <span>Verkaufen</span>
                        </button>
                    </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Skill Tree Modal -->
        <div id="skillTreeModal" class="skill-tree-modal" style="display: none;">
            <div class="skill-tree-background"></div>
            <div class="skill-tree-content">
                <div class="skill-tree-header">
                    <h2><i class="fas fa-tree"></i> Skill Tree</h2>
                    <button class="skill-tree-close" id="skillTreeClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="skill-tree-info">
                    <div class="skill-points-display">
                        <i class="fas fa-star"></i>
                        <span>Skill Punkte: <span id="skillPointsDisplay">0</span></span>
                    </div>
                </div>
                
                <div class="skill-tree-branches">
                    <!-- Damage Branch -->
                    <div class="skill-branch damage-branch">
                        <h3><i class="fas fa-sword"></i> Schaden</h3>
                        <div class="skill-nodes">
                            <div class="skill-node" data-skill="increasedDamage">
                                <div class="skill-icon"><i class="fas fa-plus"></i></div>
                                <div class="skill-info">
                                    <h4>Erh√∂hter Schaden</h4>
                                    <p>+20% Tower Schaden</p>
                                    <span class="skill-level">Level: <span class="current-level">0</span>/3</span>
                                    <button class="skill-upgrade-btn">Upgrade (1 Punkt)</button>
                                </div>
                            </div>
                            
                            <div class="skill-node" data-skill="criticalHit">
                                <div class="skill-icon"><i class="fas fa-bullseye"></i></div>
                                <div class="skill-info">
                                    <h4>Kritischer Treffer</h4>
                                    <p>10% Chance f√ºr 2x Schaden</p>
                                    <span class="skill-level">Level: <span class="current-level">0</span>/3</span>
                                    <button class="skill-upgrade-btn">Upgrade (1 Punkt)</button>
                                </div>
                            </div>
                            
                            <div class="skill-node" data-skill="armorPiercing">
                                <div class="skill-icon"><i class="fas fa-shield-virus"></i></div>
                                <div class="skill-info">
                                    <h4>R√ºstungsdurchbruch</h4>
                                    <p>Ignoriert 25% R√ºstung</p>
                                    <span class="skill-level">Level: <span class="current-level">0</span>/2</span>
                                    <button class="skill-upgrade-btn">Upgrade (1 Punkt)</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Economy Branch -->
                    <div class="skill-branch economy-branch">
                        <h3><i class="fas fa-coins"></i> Wirtschaft</h3>
                        <div class="skill-nodes">
                            <div class="skill-node" data-skill="extraGold">
                                <div class="skill-icon"><i class="fas fa-dollar-sign"></i></div>
                                <div class="skill-info">
                                    <h4>Extra Gold</h4>
                                    <p>+50% Gold pro Kill</p>
                                    <span class="skill-level">Level: <span class="current-level">0</span>/3</span>
                                    <button class="skill-upgrade-btn">Upgrade (1 Punkt)</button>
                                </div>
                            </div>
                            
                            <div class="skill-node" data-skill="cheaperTowers">
                                <div class="skill-icon"><i class="fas fa-percentage"></i></div>
                                <div class="skill-info">
                                    <h4>G√ºnstigere Tower</h4>
                                    <p>-20% Tower Kosten</p>
                                    <span class="skill-level">Level: <span class="current-level">0</span>/2</span>
                                    <button class="skill-upgrade-btn">Upgrade (1 Punkt)</button>
                                </div>
                            </div>
                            
                            <div class="skill-node" data-skill="interestRate">
                                <div class="skill-icon"><i class="fas fa-piggy-bank"></i></div>
                                <div class="skill-info">
                                    <h4>Zinssatz</h4>
                                    <p>+1 Gold pro Welle pro 100 Gold</p>
                                    <span class="skill-level">Level: <span class="current-level">0</span>/3</span>
                                    <button class="skill-upgrade-btn">Upgrade (1 Punkt)</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Support Branch -->
                    <div class="skill-branch support-branch">
                        <h3><i class="fas fa-hands-helping"></i> Unterst√ºtzung</h3>
                        <div class="skill-nodes">
                            <div class="skill-node" data-skill="fasterShooting">
                                <div class="skill-icon"><i class="fas fa-tachometer-alt"></i></div>
                                <div class="skill-info">
                                    <h4>Schnelleres Schie√üen</h4>
                                    <p>+25% Feuerrate</p>
                                    <span class="skill-level">Level: <span class="current-level">0</span>/3</span>
                                    <button class="skill-upgrade-btn">Upgrade (1 Punkt)</button>
                                </div>
                            </div>
                            
                            <div class="skill-node" data-skill="longerRange">
                                <div class="skill-icon"><i class="fas fa-expand-arrows-alt"></i></div>
                                <div class="skill-info">
                                    <h4>L√§ngere Reichweite</h4>
                                    <p>+20% Tower Reichweite</p>
                                    <span class="skill-level">Level: <span class="current-level">0</span>/2</span>
                                    <button class="skill-upgrade-btn">Upgrade (1 Punkt)</button>
                                </div>
                            </div>
                            
                            <div class="skill-node" data-skill="multiShot">
                                <div class="skill-icon"><i class="fas fa-stream"></i></div>
                                <div class="skill-info">
                                    <h4>Mehrfachschuss</h4>
                                    <p>20% Chance f√ºr 2 Projektile</p>
                                    <span class="skill-level">Level: <span class="current-level">0</span>/2</span>
                                    <button class="skill-upgrade-btn">Upgrade (1 Punkt)</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Game Instructions -->
        <footer class="game-instructions">
            <div class="instructions-toggle">
                <button id="toggleInstructions">
                    <i class="fas fa-question-circle"></i>
                    Spielanleitung
                </button>
            </div>
            
            <div id="instructionsPanel" class="instructions-panel">
                <div class="instructions-content">
                    <h3><i class="fas fa-info-circle"></i> Spielanleitung</h3>
                    <div class="instructions-grid">
                        <div class="instruction-item">
                            <i class="fas fa-mouse-pointer"></i>
                            <span>W√§hle einen Tower und klicke auf das Spielfeld zum Platzieren</span>
                        </div>
                        <div class="instruction-item">
                            <i class="fas fa-crosshairs"></i>
                            <span>Klicke auf platzierte Tower f√ºr Upgrades und Verkauf</span>
                        </div>
                        <div class="instruction-item">
                            <i class="fas fa-shield-alt"></i>
                            <span>Verhindere, dass Gegner deine Basis erreichen</span>
                        </div>
                        <div class="instruction-item">
                            <i class="fas fa-magic"></i>
                            <span>Nutze Spezialf√§higkeiten in kritischen Momenten</span>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    
    <script src="game.js"></script>
</body>
</html>